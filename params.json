{
  "name": "Home Theater Server",
  "tagline": "A tutorial to fully automate your home media using Plex, Samba, Sickbeard, SABnzbd, Couch Potato and a VPN",
  "body": "# USSSCP — Ubuntu, Samba, Sabnzbd+, Sickbeard, Couchpotato and Plex.\r\n\r\n_I’m going to show you how to set up an Ubuntu Server installation that will auto-update your media, give you the option to feed it to your TV through Plex, and allow you to view the files through your windows computers in your house. You know… just in case your old-school in-laws come over and want to watch something on their new-fangled personal computer._\r\n\r\nThis is the first part in a series of tutorials to configure your server to automate your media and serve it to your home devices. Check out the other parts!\r\n\r\n* Install Ubuntu and Samba. (You’re here)\r\n* Install and Configure SABnzbd+\r\n* Install and Configure Sickbeard.\r\n* Install and Configure Couchpotato.\r\n* Install and Configure Plex.\r\n* BONUS: Install and Configure Transmission.\r\n\r\n## Ubuntu\r\n\r\nI’m skipping Ubuntu installation. There are [many](http://www.ubuntu.com/download/server/install-ubuntu-server), _[many](http://ubuntuserverguide.com/2014/04/how-to-install-ubuntu-server-14-04-trusty-tahr.html)_, _**[many](http://askubuntu.com/questions/340965/how-do-i-install-ubuntu-server-step-by-step)**_ tutorials that you can follow to get through this part. I would simply suggest that you use an Ubuntu Server version, so that you’re not using part of your processing and RAM to serve up a GUI that you’ll likely not use often enough.\r\n\r\nI also suggest that you install Ubuntu to its own drive, however this step is completely not necessary, and is really only beneficial if you plan on upgrading your storage space for media in the future.\r\n\r\n***\r\n\r\n## Samba\r\n\r\nOnce you’ve installed Ubuntu, make sure that you install Samba. We’re going to set it up so that anyone in your network can access certain files, and also set up a different share for your own, personal, files.\r\n\r\n### Part 1: Public Share\r\n\r\nNote: Let’s get into a bash instance so that we can do all these commands without having to type “sudo” each time.\r\n\r\n    sudo bash\r\n\r\n\tapt-get install samba samba-common python-glade2 system-config-samba\r\n\r\nThis will install Samba with all of its typical dependencies.\r\n\r\nOnce that’s done, let’s configure the `/etc/samba/smb.conf` file. Make a backup of it by entering the following\r\n\r\n\tmv /etc/samba/smb.conf /etc/samba/smb.conf.bak\r\n\r\nThen let’s actually modify the `smb.conf` file.\r\n\r\n\tnano /etc/samba/smb.conf\r\n\r\nEnter the following\r\n\r\n    [global]\r\n    workgroup = WORKGROUP\r\n    server string = Samba Server %v\r\n    netbios name = ubuntu\r\n    security = user\r\n    map to guest = bad user\r\n    dns proxy = no\r\n    #====================== Share Definitions ========================= \r\n    [Media]\r\n    path = /media/plex\r\n    browsable =yes\r\n    writable = yes\r\n    guest ok = yes\r\n    read only = no\r\n\r\nThe `path = /media/plex` and `[Media]` can be anything you’d like. I usually use `[Media]` for the name of the share, and `/media/plex` for the path. This makes it easy to remember where it is, since `/media` is a common path in Linux.\r\n\r\nNow let’s create the directories that we’ll be needing for these shares. In this case, we just need to create the _/plex_ directory in the _/media_ directory.\r\n\r\n    mkdir -p /media/plex\r\n    \r\nThen restart Samba\r\n\r\n\r\n    service smbd restart\r\n\r\nYou should now be able to access your Samba share through your windows machine by typing the Ubuntu server name in the run window.\r\n\r\n<p align=\"center\">\r\n<img src=\"http://i.imgur.com/aFid2Dy.jpg\" />\r\n</p>\r\nNow, you will notice if you try to create a file that you will have a problem. Windows will tell you that you don’t have permission and will get an error. Go ahead. Try it. I’ll wait.\r\n\r\n<p align=\"center\">\r\n<img src=\"http://i.imgur.com/yrHB9Uy.png\" />\r\n</p>\r\n\r\n**Let’s fix that, shall we?**\r\n\r\nCheck the permissions of the shared folder.\r\n\r\n    root@ubuntu:~# ls -l /media\r\n    total 8\r\n    drwxr-xr-x 2 root root 4096 May 17 13:35 cdrom\r\n    drwxr-xr-x 2 root root 4096 May 17 13:35 plex\r\n\r\nIn order for anyone to access the plex folder, we need to change the user and group from *root:root* to *nobody:nogroup*.\r\n\r\n    chmod -R 0755 plex/\r\n    chown -R nobody:nogroup plex/\r\n\r\nWe should get something like this\r\n\r\n    root@ubuntu:~# ls -l /media\r\n    total 8\r\n    drwxr-xr-x 2 root root 4096 May 17 13:35 cdrom\r\n    drwxr-xr-x 5 nobody nogroup 4096 May 17 17:16 plex\r\n\r\nYou should now be able to browse and create files in the plex directory through Windows.\r\n\r\n### Part 2: Secure Share\r\n\r\nWe now need to create a user and group to access the private share with the right authentication.\r\n\r\n    addgroup justiceleague\r\n    \r\n    adduser batman --ingroup justiceleague\r\n    \r\n    smbpasswd -a batman\r\n    \r\n    root@ubuntu:~# smbpasswd -a batman\r\n    New SMB password:\r\n    Retype new SMB password:\r\n    Added user batman.\r\n\r\nNow we need to create a new folder for the private share.\r\n\r\n    mkdir -p /media/batcave\r\n    cd /media\r\n    chmod -R 0770 batcave/\r\n\r\nThen we need to edit the configuration file again.\r\n\r\n    nano /etc/samba/smb.conf\r\n    \r\n    [batcave]\r\n    path = /media/batcave\r\n    valid users = @justiceleague\r\n    guest ok = no\r\n    writeable = yes\r\n    browsable = yes\r\n\r\nFinally, we need to restart the samba service again.\r\n\r\n\r\n    service smbd restart\r\n\r\nNow you can connect to your new private share with the username and password you just created.\r\n\r\n<p align=\"center\">\r\n<img src=\"http://i.imgur.com/vFWyEvY.jpg\" />\r\n</p>\r\n\r\nHowever, you’ll notice that you still can’t create files in this share. That’s because we need to give access to the the user and group we just created. After all, Batman can’t have his top secret files just floating around for anyone to open all willy nilly.\r\n\r\n    cd /media\r\n    chown -R batman:justiceleague batcave\r\n\r\nCongrats! You have a samba share for your media, and another for your private antics.\r\n\r\nSabnzbd+ is up next.",
  "note": "Don't delete this file! It's used internally to help with page regeneration."
}